{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar _objectWithoutPropertiesLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutPropertiesLoose\"));\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _inheritsLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inheritsLoose\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _isNumber2 = _interopRequireDefault(require(\"lodash/isNumber\"));\n\nvar _isString2 = _interopRequireDefault(require(\"lodash/isString\"));\n\nvar _isNull2 = _interopRequireDefault(require(\"lodash/isNull\"));\n\nvar _isUndefined2 = _interopRequireDefault(require(\"lodash/isUndefined\"));\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\n\nvar _utils = require(\"rsuite-utils/lib/utils\");\n\nvar _utils2 = require(\"../utils\");\n\nvar _DropdownMenuCheckItem = _interopRequireDefault(require(\"../_picker/DropdownMenuCheckItem\"));\n\nvar _utils3 = _interopRequireDefault(require(\"./utils\"));\n\nvar DropdownMenu =\n/*#__PURE__*/\nfunction (_React$Component) {\n  (0, _inheritsLoose2.default)(DropdownMenu, _React$Component);\n\n  function DropdownMenu(props) {\n    var _this;\n\n    _this = _React$Component.call(this, props) || this;\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), \"utils\", {});\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), \"menus\", []);\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), \"handleSelect\", function (layer, index, node, event) {\n      var _this$props = _this.props,\n          onSelect = _this$props.onSelect,\n          childrenKey = _this$props.childrenKey;\n      var children = node[childrenKey];\n      var isLeafNode = (0, _isUndefined2.default)(children) || (0, _isNull2.default)(children);\n      var items = (children || []).map(function (item) {\n        return (0, _extends2.default)({}, item, {\n          parent: node\n        });\n      });\n\n      var _this$getCascadeItems = _this.getCascadeItems(items, layer + 1, node, isLeafNode),\n          cascadeItems = _this$getCascadeItems.cascadeItems,\n          cascadePathItems = _this$getCascadeItems.cascadePathItems;\n\n      onSelect && onSelect(node, cascadeItems, cascadePathItems, event);\n    });\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), \"addPrefix\", function (name) {\n      return (0, _utils2.prefix)(_this.props.classPrefix)(name);\n    });\n    _this.utils = (0, _utils3.default)(props);\n    return _this;\n  }\n\n  var _proto = DropdownMenu.prototype;\n\n  _proto.getCascadeItems = function getCascadeItems(items, layer, node, isLeafNode) {\n    var _this$props2 = this.props,\n        _this$props2$cascadeI = _this$props2.cascadeItems,\n        cascadeItems = _this$props2$cascadeI === void 0 ? [] : _this$props2$cascadeI,\n        cascadePathItems = _this$props2.cascadePathItems;\n    var nextItems = [];\n    var nextPathItems = [];\n\n    for (var i = 0; i < cascadeItems.length && i < layer; i += 1) {\n      nextItems.push(cascadeItems[i]);\n\n      if (i < layer - 1 && cascadePathItems) {\n        nextPathItems.push(cascadePathItems[i]);\n      }\n    }\n\n    nextPathItems.push(node);\n\n    if (!isLeafNode) {\n      nextItems.push(items);\n    }\n\n    return {\n      cascadeItems: nextItems,\n      cascadePathItems: nextPathItems\n    };\n  };\n\n  _proto.renderCascadeNode = function renderCascadeNode(node, index, layer, focus, uncheckable) {\n    var _classNames;\n\n    var _this$props3 = this.props,\n        _this$props3$value = _this$props3.value,\n        value = _this$props3$value === void 0 ? [] : _this$props3$value,\n        valueKey = _this$props3.valueKey,\n        labelKey = _this$props3.labelKey,\n        childrenKey = _this$props3.childrenKey,\n        disabledItemValues = _this$props3.disabledItemValues,\n        renderMenuItem = _this$props3.renderMenuItem,\n        onCheck = _this$props3.onCheck,\n        cascade = _this$props3.cascade;\n    var children = node[childrenKey];\n    var itemValue = node[valueKey];\n    var label = node[labelKey];\n    var disabled = disabledItemValues.some(function (disabledValue) {\n      return (0, _utils.shallowEqual)(disabledValue, itemValue);\n    }); // Use `value` in keys when If `value` is string or number\n\n    var onlyKey = (0, _isString2.default)(itemValue) || (0, _isNumber2.default)(itemValue) ? itemValue : index;\n    var active = value.some(function (v) {\n      return v === itemValue;\n    });\n\n    if (cascade) {\n      active = active || this.utils.isSomeParentChecked(node, value);\n    }\n\n    value.some(function (item) {\n      return (0, _utils.shallowEqual)(item, itemValue);\n    });\n    var classes = (0, _classnames.default)((_classNames = {}, _classNames[this.addPrefix('cascader-menu-has-children')] = children, _classNames[this.addPrefix('check-menu-item-indeterminate')] = cascade && !active && this.utils.isSomeChildChecked(node, value), _classNames));\n    return React.createElement(_DropdownMenuCheckItem.default, {\n      labelComponentClass: \"div\",\n      classPrefix: this.addPrefix('check-menu-item'),\n      key: layer + \"-\" + onlyKey,\n      disabled: disabled,\n      active: active,\n      focus: focus,\n      value: node,\n      className: classes,\n      onSelectItem: this.handleSelect.bind(this, layer, index),\n      onCheck: onCheck,\n      checkable: !uncheckable\n    }, renderMenuItem ? renderMenuItem(label, node) : label, children ? React.createElement(\"span\", {\n      className: this.addPrefix('cascader-menu-caret')\n    }) : null);\n  };\n\n  _proto.renderCascade = function renderCascade() {\n    var _this2 = this;\n\n    var _this$props4 = this.props,\n        menuWidth = _this$props4.menuWidth,\n        menuHeight = _this$props4.menuHeight,\n        valueKey = _this$props4.valueKey,\n        renderMenu = _this$props4.renderMenu,\n        _this$props4$cascadeI = _this$props4.cascadeItems,\n        cascadeItems = _this$props4$cascadeI === void 0 ? [] : _this$props4$cascadeI,\n        cascadePathItems = _this$props4.cascadePathItems,\n        uncheckableItemValues = _this$props4.uncheckableItemValues;\n    var styles = {\n      width: cascadeItems.length * menuWidth\n    };\n    var columnStyles = {\n      height: menuHeight,\n      width: menuWidth\n    };\n    var cascadeNodes = cascadeItems.map(function (children, layer) {\n      var _classNames2;\n\n      var uncheckableCount = 0;\n      var onlyKey = layer + \"_\" + children.length;\n      var menu = React.createElement(\"ul\", null, children.map(function (item, index) {\n        var uncheckable = uncheckableItemValues.some(function (uncheckableValue) {\n          return (0, _utils.shallowEqual)(uncheckableValue, item[valueKey]);\n        });\n\n        if (uncheckable) {\n          uncheckableCount++;\n        }\n\n        return _this2.renderCascadeNode(item, index, layer, cascadePathItems[layer] && (0, _utils.shallowEqual)(cascadePathItems[layer][valueKey], item[valueKey]), uncheckable);\n      }));\n      var parentNode = cascadePathItems[layer - 1];\n      var columnClasses = (0, _classnames.default)(_this2.addPrefix('cascader-menu-column'), (_classNames2 = {}, _classNames2[_this2.addPrefix('cascader-menu-column-uncheckable')] = uncheckableCount === children.length, _classNames2));\n      var node = React.createElement(\"div\", {\n        key: onlyKey,\n        className: columnClasses,\n        ref: function ref(_ref) {\n          return _this2.menus[layer] = _ref;\n        },\n        style: columnStyles\n      }, renderMenu ? renderMenu(children, menu, parentNode) : menu);\n      return node;\n    });\n    return React.createElement(\"div\", {\n      style: styles\n    }, cascadeNodes);\n  };\n\n  _proto.render = function render() {\n    var _this$props5 = this.props,\n        className = _this$props5.className,\n        rest = (0, _objectWithoutPropertiesLoose2.default)(_this$props5, [\"className\"]);\n    var classes = (0, _classnames.default)(this.addPrefix('cascader-menu-items'), className);\n    var unhandled = (0, _utils2.getUnhandledProps)(DropdownMenu, rest);\n    return React.createElement(\"div\", (0, _extends2.default)({}, unhandled, {\n      className: classes\n    }), this.renderCascade());\n  };\n\n  return DropdownMenu;\n}(React.Component);\n\n(0, _defineProperty2.default)(DropdownMenu, \"defaultProps\", {\n  data: [],\n  disabledItemValues: [],\n  uncheckableItemValues: [],\n  cascadeItems: [],\n  cascadePathItems: [],\n  menuWidth: 156,\n  menuHeight: 200,\n  childrenKey: 'children',\n  valueKey: 'value',\n  labelKey: 'label'\n});\n(0, _defineProperty2.default)(DropdownMenu, \"handledProps\", [\"cascade\", \"cascadeItems\", \"cascadePathItems\", \"childrenKey\", \"className\", \"classPrefix\", \"data\", \"disabledItemValues\", \"labelKey\", \"menuHeight\", \"menuWidth\", \"onCheck\", \"onSelect\", \"renderMenu\", \"renderMenuItem\", \"uncheckableItemValues\", \"value\", \"valueKey\"]);\nvar _default = DropdownMenu;\nexports.default = _default;","map":null,"metadata":{},"sourceType":"script"}