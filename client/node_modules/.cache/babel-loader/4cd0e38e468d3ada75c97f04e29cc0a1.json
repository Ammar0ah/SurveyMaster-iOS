{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _emptyFunction = _interopRequireDefault(require(\"./utils/emptyFunction\"));\n\nvar _normalizeWheel = _interopRequireDefault(require(\"./normalizeWheel\"));\n\nvar _requestAnimationFramePolyfill = _interopRequireDefault(require(\"./animation/requestAnimationFramePolyfill\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nvar WheelHandler =\n/*#__PURE__*/\nfunction () {\n  function WheelHandler(onWheel, handleScrollX, handleScrollY, stopPropagation) {\n    _classCallCheck(this, WheelHandler);\n\n    this.animationFrameID = null;\n    this.deltaX = 0;\n    this.deltaY = 0;\n    this.didWheel = this.didWheel.bind(this);\n    this._rootRef = null;\n\n    if (typeof handleScrollX !== 'function') {\n      handleScrollX = handleScrollX ? _emptyFunction.default.thatReturnsTrue : _emptyFunction.default.thatReturnsFalse;\n    }\n\n    if (typeof handleScrollY !== 'function') {\n      handleScrollY = handleScrollY ? _emptyFunction.default.thatReturnsTrue : _emptyFunction.default.thatReturnsFalse;\n    }\n\n    if (typeof stopPropagation !== 'function') {\n      stopPropagation = stopPropagation ? _emptyFunction.default.thatReturnsTrue : _emptyFunction.default.thatReturnsFalse;\n    }\n\n    this.handleScrollX = handleScrollX;\n    this.handleScrollY = handleScrollY;\n    this.stopPropagation = stopPropagation;\n    this.onWheelCallback = onWheel;\n    this.onWheel = this.onWheel.bind(this);\n  }\n\n  _createClass(WheelHandler, [{\n    key: \"contains\",\n    value: function contains(target) {\n      var parent = target;\n\n      while (parent !== document.body) {\n        if (parent === this._rootRef) {\n          return true;\n        }\n\n        parent = parent.parentNode;\n      }\n\n      return false;\n    }\n  }, {\n    key: \"onWheel\",\n    value: function onWheel(event) {\n      var normalizedEvent = (0, _normalizeWheel.default)(event);\n      var deltaX = this.deltaX + normalizedEvent.pixelX;\n      var deltaY = this.deltaY + normalizedEvent.pixelY;\n      var handleScrollX = this.handleScrollX(deltaX, deltaY);\n      var handleScrollY = this.handleScrollY(deltaY, deltaX);\n\n      if (!handleScrollX && !handleScrollY) {\n        return;\n      }\n\n      if (this._rootRef && !this.contains(event.target)) {\n        return;\n      }\n\n      this.deltaX += handleScrollX ? normalizedEvent.pixelX : 0;\n      this.deltaY += handleScrollY ? normalizedEvent.pixelY : 0;\n      event.preventDefault();\n      var changed;\n\n      if (this.deltaX !== 0 || this.deltaY !== 0) {\n        if (this.stopPropagation()) {\n          event.stopPropagation();\n        }\n\n        changed = true;\n      }\n\n      if (changed === true && this.animationFrameID === null) {\n        this.animationFrameID = (0, _requestAnimationFramePolyfill.default)(this.didWheel);\n      }\n    }\n  }, {\n    key: \"setRoot\",\n    value: function setRoot(rootRef) {\n      this._rootRef = rootRef;\n    }\n  }, {\n    key: \"didWheel\",\n    value: function didWheel() {\n      this.animationFrameID = null;\n      this.onWheelCallback(this.deltaX, this.deltaY);\n      this.deltaX = 0;\n      this.deltaY = 0;\n    }\n  }]);\n\n  return WheelHandler;\n}();\n\nvar _default = WheelHandler;\nexports.default = _default;","map":null,"metadata":{},"sourceType":"script"}