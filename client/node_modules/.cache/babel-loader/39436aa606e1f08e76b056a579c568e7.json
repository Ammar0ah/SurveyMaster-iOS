{"ast":null,"code":"import axios from \"../../axios-requests\";\nimport * as actions from \"../actions/types\";\nimport * as Qtypes from \"../../Components/Question/QuestionTypes\";\nimport _ from \"lodash\";\nimport { Alert } from 'rsuite';\nexport const ChangeTitle = newVal => dispatch => dispatch({\n  type: actions.CHANGE_SURVEY_TITLE,\n  val: newVal\n});\nexport const AddQuestion = type => dispatch => dispatch({\n  type: actions.ADD_QUESTION,\n  Qtype: type\n});\nexport const SubmitNewSurvey = (survey, submittig, Redirect) => dispatch => {\n  let SC = _.cloneDeep(survey);\n\n  SC.pages[0].questions = SC.pages[0].questions.map(el => {\n    let newQ = _.pick(el, [\"title\", \"type\", \"content\"]);\n\n    switch (newQ.type) {\n      case Qtypes.TEXT:\n      case Qtypes.PARAGRAPH:\n        newQ.content = {};\n        break;\n\n      case Qtypes.RADIO_GROUP:\n      case Qtypes.CHECKBOX:\n      case Qtypes.DROPDOWN:\n        newQ.content = _.pick(newQ.content, [\"choices\"]);\n        break;\n\n      case Qtypes.SLIDER:\n      case Qtypes.RANGE:\n        newQ.content = _.pick(newQ.content, [\"min\", \"max\", \"step\", \"defaultValue\"]);\n        console.log(newQ);\n        newQ.content = newQ.content.step === \"\" ? _.omit(newQ.content, [\"step\"]) : newQ.content;\n        newQ.content = newQ.content.defaultValue === \"\" ? _.omit(newQ.content, [\"defaultValue\"]) : newQ.content;\n        break;\n\n      case Qtypes.RATING:\n        newQ.content = _.pick(newQ.content, [\"min\", \"max\", \"defaultValue\"]);\n        newQ.content = newQ.content.defaultValue === \"\" ? _.omit(newQ.content, [\"defaultValue\"]) : newQ.content;\n        break;\n\n      default:\n        newQ.content = {};\n        break;\n    }\n\n    return newQ;\n  });\n  const header = {\n    \"x-auth-token\": localStorage.getItem(\"token\")\n  }; // survey.pages[0].questions = finalSurveyQuestions\n\n  console.log(SC.pages[0].questions[0], survey.pages[0].questions[0]);\n  axios.post(\"/api/surveys\", SC, {\n    headers: header\n  }).then(response => {\n    Alert.success(\"Submitted Successfully\");\n    console.log(response);\n  }).then(submittig(false)).then(Redirect).catch(err => console.log(err));\n};","map":{"version":3,"sources":["/Users/ammar0ah/Desktop/SurveyMaster/SurveyMaster/client/src/store/actions/BuilderAction.js"],"names":["axios","actions","Qtypes","_","Alert","ChangeTitle","newVal","dispatch","type","CHANGE_SURVEY_TITLE","val","AddQuestion","ADD_QUESTION","Qtype","SubmitNewSurvey","survey","submittig","Redirect","SC","cloneDeep","pages","questions","map","el","newQ","pick","TEXT","PARAGRAPH","content","RADIO_GROUP","CHECKBOX","DROPDOWN","SLIDER","RANGE","console","log","step","omit","defaultValue","RATING","header","localStorage","getItem","post","headers","then","response","success","catch","err"],"mappings":"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","sourcesContent":["import axios from \"../../axios-requests\";\nimport * as actions from \"../actions/types\";\nimport * as Qtypes from \"../../Components/Question/QuestionTypes\";\nimport _ from \"lodash\";\nimport {Alert} from 'rsuite'\n\nexport const ChangeTitle = (newVal) => dispatch =>\n  dispatch({ type: actions.CHANGE_SURVEY_TITLE,val:newVal });\n\n\nexport const AddQuestion = (type) => dispatch =>\n  dispatch({ type: actions.ADD_QUESTION,Qtype: type });\nexport const SubmitNewSurvey = (survey,submittig,Redirect) => dispatch => {\n  let SC = _.cloneDeep(survey)\n  SC.pages[0].questions = SC.pages[0].questions.map(el => {\n    let newQ = _.pick(el, [\"title\", \"type\", \"content\"]);\n    switch (newQ.type) {\n      case Qtypes.TEXT:\n      case Qtypes.PARAGRAPH:\n        newQ.content = {};\n        break;\n      case Qtypes.RADIO_GROUP:\n      case Qtypes.CHECKBOX:\n      case Qtypes.DROPDOWN:\n        newQ.content = _.pick(newQ.content, [\"choices\"]);\n\n        break;\n      case Qtypes.SLIDER:\n      case Qtypes.RANGE:\n        newQ.content = _.pick(newQ.content, [\n          \"min\",\n          \"max\",\n          \"step\",\n          \"defaultValue\"\n        ]);\n        console.log(newQ)\n        newQ.content = newQ.content.step === \"\" ? _.omit(newQ.content,[\"step\"]) : newQ.content\n        newQ.content = newQ.content.defaultValue === \"\" ? _.omit(newQ.content,[\"defaultValue\"]) : newQ.content\n        break;\n      case Qtypes.RATING:\n          newQ.content = _.pick(newQ.content, [\n            \"min\",\n            \"max\",\n            \"defaultValue\"\n          ]);\n        newQ.content = newQ.content.defaultValue === \"\" ? _.omit(newQ.content,[\"defaultValue\"]) : newQ.content\n        break;\n      default:\n        newQ.content = {};\n        break;\n    }\n    return newQ;\n  });\n  const header = {\n    \"x-auth-token\": localStorage.getItem(\"token\")\n  };\n\n  // survey.pages[0].questions = finalSurveyQuestions\n  console.log(SC.pages[0].questions[0],survey.pages[0].questions[0]);\n  axios\n    .post(\"/api/surveys\", SC,{headers:header})\n    .then(response => {\n      Alert.success(\"Submitted Successfully\");\n      console.log(response);\n    }).then(submittig(false)).then(Redirect)\n    .catch(err => console.log(err));\n};\n"]},"metadata":{},"sourceType":"module"}