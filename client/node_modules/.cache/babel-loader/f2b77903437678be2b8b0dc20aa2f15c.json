{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _objectWithoutPropertiesLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutPropertiesLoose\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _inheritsLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inheritsLoose\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _camelCase2 = _interopRequireDefault(require(\"lodash/camelCase\"));\n\nvar _isNumber2 = _interopRequireDefault(require(\"lodash/isNumber\"));\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _domLib = require(\"dom-lib\");\n\nvar _rsuiteIntl = require(\"rsuite-intl\");\n\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\n\nvar _utils = require(\"../utils\");\n\nvar _scrollTopAnimation = _interopRequireDefault(require(\"../utils/scrollTopAnimation\"));\n\nvar _set_hours = _interopRequireDefault(require(\"date-fns/set_hours\"));\n\nvar _set_minutes = _interopRequireDefault(require(\"date-fns/set_minutes\"));\n\nvar _set_seconds = _interopRequireDefault(require(\"date-fns/set_seconds\"));\n\nvar _get_seconds = _interopRequireDefault(require(\"date-fns/get_seconds\"));\n\nvar _get_minutes = _interopRequireDefault(require(\"date-fns/get_minutes\"));\n\nvar _get_hours = _interopRequireDefault(require(\"date-fns/get_hours\"));\n\nvar _add_days = _interopRequireDefault(require(\"date-fns/add_days\"));\n\nvar ranges = {\n  hours: {\n    start: 0,\n    end: 23\n  },\n  minutes: {\n    start: 0,\n    end: 59\n  },\n  seconds: {\n    start: 0,\n    end: 59\n  }\n};\n\nvar TimeDropdown =\n/*#__PURE__*/\nfunction (_React$PureComponent) {\n  (0, _inheritsLoose2.default)(TimeDropdown, _React$PureComponent);\n\n  function TimeDropdown() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _React$PureComponent.call.apply(_React$PureComponent, [this].concat(args)) || this;\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), \"container\", {});\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), \"content\", {});\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), \"scrollTo\", function (time) {\n      Object.entries(time).forEach(function (item) {\n        var container = _this.container[item[0]];\n        var node = container.querySelector(\"[data-key=\\\"\" + item[0] + \"-\" + item[1] + \"\\\"]\");\n\n        if (node && container) {\n          var _getPosition = (0, _domLib.getPosition)(node, container),\n              top = _getPosition.top;\n\n          (0, _scrollTopAnimation.default)(_this.container[item[0]], top, (0, _domLib.scrollTop)(_this.container[item[0]]) !== 0);\n        }\n      });\n    });\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), \"handleClick\", function (type, d, event) {\n      var _this$props = _this.props,\n          onSelect = _this$props.onSelect,\n          date = _this$props.date; // $FlowFixMe\n\n      var nextDate = date || new Date();\n\n      switch (type) {\n        case 'hours':\n          nextDate = (0, _set_hours.default)(date, d);\n          break;\n\n        case 'minutes':\n          nextDate = (0, _set_minutes.default)(date, d);\n          break;\n\n        case 'seconds':\n          nextDate = (0, _set_seconds.default)(date, d);\n          break;\n      }\n\n      onSelect && onSelect(nextDate, event);\n    });\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), \"addPrefix\", function (name) {\n      return (0, _utils.prefix)(_this.props.classPrefix)(name);\n    });\n    return _this;\n  }\n\n  var _proto = TimeDropdown.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    this.updatePosition();\n  };\n\n  _proto.componentDidUpdate = function componentDidUpdate() {\n    this.updatePosition();\n  };\n\n  _proto.getTime = function getTime(props) {\n    var _ref = props || this.props,\n        format = _ref.format,\n        date = _ref.date;\n\n    var time = date || new Date();\n    var nextTime = {};\n\n    if (!format) {\n      return nextTime;\n    }\n\n    if (/(H|h)/.test(format)) {\n      nextTime.hours = (0, _get_hours.default)(time);\n    }\n\n    if (/m/.test(format)) {\n      nextTime.minutes = (0, _get_minutes.default)(time);\n    }\n\n    if (/s/.test(format)) {\n      nextTime.seconds = (0, _get_seconds.default)(time);\n    }\n\n    return nextTime;\n  };\n\n  _proto.updatePosition = function updatePosition(props) {\n    var _ref2 = props || this.props,\n        show = _ref2.show;\n\n    var time = this.getTime(props);\n    show && this.scrollTo(time);\n  };\n\n  _proto.renderColumn = function renderColumn(type, active) {\n    var _this2 = this;\n\n    if (!(0, _isNumber2.default)(active)) {\n      return null;\n    }\n\n    var date = this.props.date;\n    var _ranges$type = ranges[type],\n        start = _ranges$type.start,\n        end = _ranges$type.end;\n    var items = [];\n    var hideFunc = this.props[(0, _camelCase2.default)(\"hide_\" + type)];\n    var disabledFunc = this.props[(0, _camelCase2.default)(\"disabled_\" + type)];\n\n    var _loop = function _loop(i) {\n      if (!(hideFunc && hideFunc(i, date))) {\n        var _classNames;\n\n        var disabled = disabledFunc && disabledFunc(i, date);\n        var itemClasses = (0, _classnames.default)(_this2.addPrefix('cell'), (_classNames = {}, _classNames[_this2.addPrefix('cell-active')] = active === i, _classNames[_this2.addPrefix('cell-disabled')] = disabled, _classNames));\n        items.push(React.createElement(\"li\", {\n          key: i\n        }, React.createElement(\"a\", {\n          role: \"menu\",\n          className: itemClasses,\n          tabIndex: \"-1\",\n          \"data-key\": type + \"-\" + i,\n          onClick: function onClick(event) {\n            !disabled && _this2.handleClick(type, i, event);\n          }\n        }, i)));\n      }\n    };\n\n    for (var i = start; i <= end; i += 1) {\n      _loop(i);\n    }\n\n    return React.createElement(\"div\", {\n      className: this.addPrefix('column')\n    }, React.createElement(\"div\", {\n      className: this.addPrefix('column-title')\n    }, React.createElement(_rsuiteIntl.FormattedMessage, {\n      id: type\n    })), React.createElement(\"ul\", {\n      ref: function ref(_ref3) {\n        _this2.container[type] = _ref3;\n      }\n    }, items));\n  };\n\n  _proto.render = function render() {\n    var _this3 = this;\n\n    var _this$props2 = this.props,\n        className = _this$props2.className,\n        classPrefix = _this$props2.classPrefix,\n        rest = (0, _objectWithoutPropertiesLoose2.default)(_this$props2, [\"className\", \"classPrefix\"]);\n    var time = this.getTime();\n    var classes = (0, _classnames.default)(classPrefix, className);\n    var unhandled = (0, _utils.getUnhandledProps)(TimeDropdown, rest);\n    return React.createElement(\"div\", (0, _extends2.default)({}, unhandled, {\n      className: classes\n    }), React.createElement(\"div\", {\n      className: this.addPrefix('content'),\n      ref: function ref(_ref4) {\n        _this3.content = _ref4;\n      }\n    }, React.createElement(\"div\", {\n      className: this.addPrefix('row')\n    }, this.renderColumn('hours', time.hours), this.renderColumn('minutes', time.minutes), this.renderColumn('seconds', time.seconds))));\n  };\n\n  return TimeDropdown;\n}(React.PureComponent);\n\n(0, _defineProperty2.default)(TimeDropdown, \"defaultProps\", {\n  show: false,\n  ranges: [{\n    label: 'today',\n    value: new Date(),\n    closeOverlay: true\n  }, {\n    label: 'yesterday',\n    value: (0, _add_days.default)(new Date(), -1),\n    closeOverlay: true\n  }]\n});\n(0, _defineProperty2.default)(TimeDropdown, \"handledProps\", [\"className\", \"classPrefix\", \"date\", \"disabledDate\", \"disabledHours\", \"disabledMinutes\", \"disabledSeconds\", \"format\", \"hideHours\", \"hideMinutes\", \"hideSeconds\", \"onSelect\", \"ranges\", \"show\"]);\nvar enhance = (0, _utils.defaultProps)({\n  classPrefix: 'calendar-time-dropdown'\n});\n\nvar _default = enhance(TimeDropdown);\n\nexports.default = _default;","map":null,"metadata":{},"sourceType":"script"}